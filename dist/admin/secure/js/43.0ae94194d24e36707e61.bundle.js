(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{732:function(e,t,n){"use strict";n.r(t),n.d(t,"Node",(function(){return f})),n.d(t,"Sidebar",(function(){return h})),n.d(t,"getPlugins",(function(){return w})),n.d(t,"getSchema",(function(){return b})),n.d(t,"type",(function(){return m}));var a=n(5),i=n(6),o=n(1),c=n(0),r=n(545),d=n(515),s=n(494),l=n(330),g=n(516);let m="image-container";const u=(e,t,n)=>{const a=new FileReader;a.onload=a=>y(e,t,n,a.target.result),a.readAsDataURL(n)},y=(e,t,n,a)=>{t.insertBlock({type:m,nodes:[l.a.create({type:e.image.type,data:{file:n,src:a}})]})};function h({blocks:e,editor:t}){const n=Object(o.jsx)("svg",{width:16,height:16,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"},Object(o.jsx)("path",{d:"M480 416v16c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V176c0-26.51 21.49-48 48-48h16v208c0 44.112 35.888 80 80 80h336zm96-80V80c0-26.51-21.49-48-48-48H144c-26.51 0-48 21.49-48 48v256c0 26.51 21.49 48 48 48h384c26.51 0 48-21.49 48-48zM256 128c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-96 144l55.515-55.515c4.686-4.686 12.284-4.686 16.971 0L272 256l135.515-135.515c4.686-4.686 12.284-4.686 16.971 0L512 208v112H160v-48z"}));return Object(o.jsx)(g.a,{icon:n,text:"Insert Image",insertBlock:()=>{new Promise(e=>{let t=document.createElement("input");t.type="file",t.onchange=()=>e([...t.files]),t.click()}).then(n=>{n.forEach(n=>u(e,t,n))})}})}function p(e){return"left"===e?{float:"left",marginRight:"10px",width:"50%"}:"right"===e?{float:"right",marginLeft:"10px",width:"50%"}:{display:"block",margin:"0px auto",width:"100%"}}function f(e){let t=e.node.data.get("alignment");return Object(o.jsx)("figure",Object(a.a)({css:Object(i.a)({display:"flex",flexDirection:"column"},p(t))},e.attributes),Object(o.jsx)(e.blocks.image.ImageAlignmentContext.Provider,{value:Object(c.useMemo)(()=>({alignment:t,onAlignmentChange(t){e.editor.setNodeByKey(e.node.key,{data:e.node.data.set("alignment",t)})}}),[e.node.key,t,e.editor,e.node.data])},e.children))}let b=({blocks:{image:e,caption:t}})=>({nodes:[{match:[{type:e.type}],min:1,max:1},{match:[{type:t.type}],min:1,max:1}],normalize(e,t){switch(t.code){case"child_min_invalid":return 0===t.index&&e.removeNodeByKey(t.node.key),void(1===t.index&&e.insertNodeByKey(t.node.key,1,l.a.create("caption")));case"node_data_invalid":return void("alignment"===t.key&&e.setNodeByKey(t.node.key,{data:t.node.data.set("alignment","center")}))}console.log(t)},data:{alignment(e){switch(e){case"center":case"left":case"right":return!0}return!1}}}),w=({blocks:e})=>[Object(r.a)({extensions:d,insertImage:u.bind(null,e)}),{onDragStart(t,n,a){const{value:i}=n,{document:o}=i,c=Object(s.b)(t.target,n);if(c.type===e.image.type){const e=o.getAncestors(c.key);let t=e.get(e.size-1);t.type===m&&n.moveToRangeOfNode(t)}a()}}]}}]);